<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../_jquery-ui-1.12.1/jquery-ui.css">
    <script src="../../_js/jquery-3.4.1.js"></script>
    <script src="../../_jquery-ui-1.12.1/jquery-ui.js"></script>

</head>

<body>
    <!-- 10. jQuery UI 官網文件所在 -->
    <!--    API Documentation > (左側) Widgets > Datepicker Widget -->

    <!-- 15. 複製官方網站的範例 -->
    <!--    Demos > Widgets > Datepicker > (右側) Examples > Select a Date Range -->

    <!-- 20. 增加|調整 設定 -->
    <!--    a. 年份改為下拉清單，限制 系統年-1 ~ 系統年+2 -->
    <!--    b. 設定日期格式 例如 2099/12/31 -->
    <label for="from">From</label>
    <input type="text" id="from" name="from">
    <label for="to">to</label>
    <input type="text" id="to" name="to">

    <script>
        $(function () {
            var dateFormat = "yy/mm/dd", // 這裡怪怪的
                from = $("#from")
                    .datepicker({
                        defaultDate: "+1w", // 快要好了
                        changeMonth: true,
                        numberOfMonths: 2,

                        changeYear: true,         // 開啟年份下拉
                        yearRange: "c-1:c+2",     // 設定年份是 系統年-1 ~ 系統年+2
                        dateFormat: dateFormat,   // 設定日期格式
                    })
                    .on("change", function () {
                        to.datepicker("option", "minDate", getDate(this));
                    }),
                to = $("#to").datepicker({
                    defaultDate: "+1w",
                    changeMonth: true,
                    numberOfMonths: 3,

                    changeYear: true,         // 開啟年份下拉
                    yearRange: "c-1:c+2",     // 設定年份是 系統年-1 ~ 系統年+2
                    dateFormat: dateFormat,   // 設定日期格式
                })
                    .on("change", function () {
                        from.datepicker("option", "maxDate", getDate(this));
                    });

            function getDate(element) {
                var date;
                try {
                    date = $.datepicker.parseDate(dateFormat, element.value);
                } catch (error) {
                    date = null;
                }
                return date;
            }
        });
    </script>
</body>

</html>